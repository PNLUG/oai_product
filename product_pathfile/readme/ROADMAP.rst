Refactor using a dynamic model that permits to define used formats by the user

Evaluate use on product template
